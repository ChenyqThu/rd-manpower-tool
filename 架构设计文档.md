# Omada ç ”å‘äººåŠ›æ’å¸ƒå¯è§†åŒ–å·¥å…· - æ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**Omada ç ”å‘äººåŠ›æ’å¸ƒå¯è§†åŒ–å·¥å…·** æ˜¯ä¸€ä¸ªåŸºäºReact + TypeScript + Viteæ„å»ºçš„ä¼ä¸šçº§äººåŠ›èµ„æºç®¡ç†å¹³å°ï¼Œä¸“ä¸ºç ”å‘å›¢é˜Ÿçš„å¤æ‚äººåŠ›è°ƒé…åœºæ™¯è®¾è®¡ã€‚æ”¯æŒ8ä¸ªå›¢é˜Ÿã€78äººåœ¨11ä¸ªé¡¹ç›®ä¸­4ä¸ªæ—¶é—´èŠ‚ç‚¹çš„æ™ºèƒ½åˆ†é…å’Œå¯è§†åŒ–åˆ†æã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å‰ç«¯åº”ç”¨å±‚ (React App)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚åŸºç¡€é…ç½®æ¨¡å—  â”‚  â”‚äººåŠ›æ’å¸ƒæ¨¡å—  â”‚  â”‚å¯è§†åŒ–æ¨¡å—   â”‚  â”‚å¯¼å‡º  â”‚ â”‚
â”‚  â”‚ConfigModule â”‚  â”‚AllocationModâ”‚  â”‚Visualizationâ”‚  â”‚Exportâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     ç»„ä»¶å±‚ (Components)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚UIåŸºç¡€ç»„ä»¶   â”‚  â”‚ä¸šåŠ¡ç»„ä»¶     â”‚  â”‚å›¾è¡¨ç»„ä»¶     â”‚  â”‚å·¥å…·  â”‚ â”‚
â”‚  â”‚Button,Switchâ”‚  â”‚AllocationGridâ”‚  â”‚SankeyChart  â”‚  â”‚Utils â”‚ â”‚
â”‚  â”‚Modal,Input  â”‚  â”‚ProjectConfig â”‚  â”‚Distribution â”‚  â”‚      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   çŠ¶æ€ç®¡ç†å±‚ (Zustand)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚configStore  â”‚                    â”‚dataStore    â”‚          â”‚
â”‚  â”‚- teams      â”‚                    â”‚- allocationsâ”‚          â”‚
â”‚  â”‚- projects   â”‚                    â”‚- validation â”‚          â”‚
â”‚  â”‚- timePoints â”‚                    â”‚- statistics â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   æ•°æ®æŒä¹…åŒ–å±‚ (Storage)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚localStorage â”‚  â”‚SessionStorageâ”‚  â”‚Export Files â”‚          â”‚
â”‚  â”‚é…ç½®æ•°æ®     â”‚  â”‚ä¸´æ—¶æ•°æ®     â”‚  â”‚HTML/Excel   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å¼€å‘å·¥å…·é“¾                              â”‚
â”‚  Vite + TypeScript + ESLint + Tailwind CSS                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      å‰ç«¯æ¡†æ¶                                â”‚
â”‚  React 18 + React Hooks + Function Components              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      çŠ¶æ€ç®¡ç†                                â”‚
â”‚  Zustand (è½»é‡çº§çŠ¶æ€ç®¡ç†) + localStorageæŒä¹…åŒ–              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      UI & æ ·å¼                               â”‚
â”‚  Tailwind CSS + è‡ªå®šä¹‰ç»„ä»¶ç³»ç»Ÿ + å“åº”å¼è®¾è®¡                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      æ•°æ®å¯è§†åŒ–                              â”‚
â”‚  ECharts 5.4.3 + è‡ªå®šä¹‰å›¾è¡¨ç»„ä»¶ + äº¤äº’å¼Dashboard          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      æ•°æ®å¤„ç†                                â”‚
â”‚  TypeScriptç±»å‹ç³»ç»Ÿ + Lodashå·¥å…·åº“ + æ•°æ®éªŒè¯               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 1. é…ç½®ç®¡ç†æ¨¡å— (Config Module)

**èŒè´£**: ç®¡ç†å›¢é˜Ÿã€é¡¹ç›®ã€æ—¶é—´ç‚¹çš„åŸºç¡€é…ç½®

**ç»„ä»¶ç»“æ„**:
```typescript
src/modules/config/
â”œâ”€â”€ TeamConfig.tsx      # å›¢é˜Ÿé…ç½®ç»„ä»¶
â”œâ”€â”€ ProjectConfig.tsx   # é¡¹ç›®é…ç½®ç»„ä»¶
â””â”€â”€ TimeConfig.tsx      # æ—¶é—´ç‚¹é…ç½®ç»„ä»¶
```

**æ•°æ®æ¨¡å‹**:
```typescript
interface Team {
  id: string;
  name: string;
  capacity: number;
  description: string;
  color: string;
}

interface Project {
  id: string;
  name: string;
  status: ProjectStatus;
  description: string;
  color: string;
}

interface TimePoint {
  id: string;
  name: string;
  date: string;
  type: TimePointType;
  description: string;
}
```

### 2. äººåŠ›æ’å¸ƒæ¨¡å— (Allocation Module)

**èŒè´£**: æä¾›äººåŠ›åˆ†é…çš„äº¤äº’ç•Œé¢å’Œæ•°æ®ç®¡ç†

**æ ¸å¿ƒç»„ä»¶**: `AllocationGrid.tsx`

**å…³é”®ç‰¹æ€§**:
- å†»ç»“è¡¨å¤´å’Œç¬¬ä¸€åˆ—
- å®æ—¶æ•°æ®æ ¡éªŒå’Œé¢œè‰²é¢„è­¦
- æ˜¾ç¤ºæ§åˆ¶å¼€å…³
- æ•°å­—æ ¼å¼åŒ–ä¼˜åŒ–
- å“åº”å¼å¸ƒå±€

**æ•°æ®ç»“æ„**:
```typescript
interface Allocation {
  occupied: number;
}

interface AllocationMatrix {
  [timePointId: string]: {
    [projectId: string]: {
      [teamId: string]: Allocation;
    };
  };
}
```

### 3. å¯è§†åŒ–æ¨¡å— (Visualization Module)

**èŒè´£**: æä¾›æ¡‘åŸºå›¾å’Œåˆ†å¸ƒå›¾çš„å¯è§†åŒ–åˆ†æ

**ç»„ä»¶ç»“æ„**:
```typescript
src/modules/visualization/
â”œâ”€â”€ SankeyChart.tsx       # æ¡‘åŸºå›¾ç»„ä»¶
â””â”€â”€ DistributionChart.tsx # åˆ†å¸ƒå›¾ç»„ä»¶
```

#### 3.1 æ¡‘åŸºå›¾è®¾è®¡

**ç®—æ³•æ ¸å¿ƒ**:
```typescript
// æ™ºèƒ½äººåŠ›æµåŠ¨ç®—æ³•
1. èµ„æºæ”¶é›†é˜¶æ®µ: æ”¶é›†ä¸Šä¸€æ—¶é—´ç‚¹æ‰€æœ‰é¡¹ç›®çš„äººåŠ›èµ„æºï¼ŒæŒ‰å›¢é˜Ÿåˆ†ç»„
2. éœ€æ±‚åˆ†æé˜¶æ®µ: åˆ†æå½“å‰æ—¶é—´ç‚¹æ¯ä¸ªé¡¹ç›®çš„äººåŠ›éœ€æ±‚ï¼ŒæŒ‰å›¢é˜Ÿåˆ†ç»„
3. æ™ºèƒ½åˆ†é…é˜¶æ®µ:
   - åŒä¸€é¡¹ç›®ä¼˜å…ˆç»§æ‰¿ï¼ˆå–æœ€å°å€¼ï¼‰
   - å‰©ä½™éœ€æ±‚ä»å…¶ä»–é¡¹ç›®çš„åŒå›¢é˜Ÿèµ„æºä¸­åˆ†é…
   - ä¸¥æ ¼å›¢é˜Ÿç±»å‹åŒ¹é…ï¼Œé¿å…è·¨é¢†åŸŸåˆ†é…
4. è¿æ¥çº¿åˆå¹¶: ç›¸åŒsourceå’Œtargetçš„è¿æ¥çº¿è‡ªåŠ¨åˆå¹¶ï¼Œä¿ç•™å›¢é˜Ÿè¯¦æƒ…
```

**æ•°æ®ç»“æ„**:
```typescript
interface SankeyNode {
  name: string;
  value?: number;
  itemStyle?: { color: string };
  category?: number;
}

interface SankeyLink {
  source: string;
  target: string;
  value: number;
  teamDetails?: {[teamId: string]: {name: string, value: number, color: string}};
}
```

#### 3.2 åˆ†å¸ƒå›¾è®¾è®¡

**åŠŸèƒ½ç‰¹æ€§**:
- å·¦ä¾§é¥¼å›¾æ˜¾ç¤ºæ—¶é—´ç‚¹åˆ†å¸ƒ
- å³ä¾§æŠ˜çº¿å›¾æ˜¾ç¤ºè¶‹åŠ¿å˜åŒ–
- æ—¶é—´è½´äº¤äº’è”åŠ¨
- æŒ‰é¡¹ç›®ç»´åº¦ç»Ÿè®¡

## ğŸ¨ UIç»„ä»¶ç³»ç»Ÿ

### ç»„ä»¶åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ä¸šåŠ¡ç»„ä»¶å±‚                              â”‚
â”‚  AllocationGrid, SankeyChart, DistributionChart            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      å¤åˆç»„ä»¶å±‚                              â”‚
â”‚  TopBar, Menu, Tabs, Breadcrumb                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      åŸºç¡€ç»„ä»¶å±‚                              â”‚
â”‚  Button, Switch, Modal, Input                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è®¾è®¡ç³»ç»Ÿè§„èŒƒ

**é¢œè‰²ç³»ç»Ÿ**:
```typescript
// å›¢é˜Ÿé¢œè‰² (8ç§)
const teamColors = [
  '#3B82F6', '#EF4444', '#10B981', '#F59E0B',
  '#8B5CF6', '#06B6D4', '#EC4899', '#84CC16'
];

// é¡¹ç›®é¢œè‰² (11ç§)
const projectColors = [
  '#1E40AF', '#DC2626', '#059669', '#D97706',
  '#7C3AED', '#0891B2', '#BE185D', '#65A30D',
  '#4338CA', '#B91C1C', '#047857'
];

// çŠ¶æ€é¢œè‰²
const statusColors = {
  normal: '#10B981',    // ç»¿è‰² - æ­£å¸¸
  warning: '#F59E0B',   // é»„è‰² - æ»¡é…
  danger: '#EF4444'     // çº¢è‰² - è¶…é…
};
```

**é—´è·ç³»ç»Ÿ**:
```css
/* åŸºäºTailwind CSSçš„8pxåŸºå‡†é—´è·ç³»ç»Ÿ */
.spacing-xs { padding: 0.25rem; }  /* 4px */
.spacing-sm { padding: 0.5rem; }   /* 8px */
.spacing-md { padding: 1rem; }     /* 16px */
.spacing-lg { padding: 1.5rem; }   /* 24px */
.spacing-xl { padding: 2rem; }     /* 32px */
```

## ğŸ“Š çŠ¶æ€ç®¡ç†æ¶æ„

### Zustand Storeè®¾è®¡

```typescript
// é…ç½®Store
interface ConfigStore {
  teams: Team[];
  projects: Project[];
  timePoints: TimePoint[];
  
  // Actions
  addTeam: (team: Team) => void;
  updateTeam: (id: string, updates: Partial<Team>) => void;
  deleteTeam: (id: string) => void;
  // ... å…¶ä»–actions
}

// æ•°æ®Store
interface DataStore {
  allocations: AllocationMatrix;
  validation: ValidationResult;
  statistics: Statistics;
  
  // Actions
  updateAllocation: (timePointId: string, projectId: string, teamId: string, allocation: Allocation) => void;
  validateData: () => void;
  calculateStatistics: () => void;
}
```

### æ•°æ®æµè®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·æ“ä½œ   â”‚â”€â”€â”€â–¶â”‚  Storeæ›´æ–°  â”‚â”€â”€â”€â–¶â”‚  ç»„ä»¶é‡æ¸²æŸ“  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²                   â”‚                   â”‚
       â”‚                   â–¼                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UIåé¦ˆ     â”‚â—€â”€â”€â”€â”‚  æŒä¹…åŒ–å­˜å‚¨  â”‚â—€â”€â”€â”€â”‚  å‰¯ä½œç”¨å¤„ç†  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ æ•°æ®å¤„ç†æµç¨‹

### äººåŠ›åˆ†é…è®¡ç®—æµç¨‹

```mermaid
graph TD
    A[ç”¨æˆ·è¾“å…¥åˆ†é…æ•°æ®] --> B[æ•°æ®éªŒè¯]
    B --> C[è®¡ç®—å›¢é˜Ÿåˆ©ç”¨ç‡]
    C --> D[ç”Ÿæˆé¢„è­¦ä¿¡æ¯]
    D --> E[æ›´æ–°å¯è§†åŒ–å›¾è¡¨]
    E --> F[æŒä¹…åŒ–å­˜å‚¨]
    
    B --> G{éªŒè¯å¤±è´¥?}
    G -->|æ˜¯| H[æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯]
    G -->|å¦| C
```

### æ¡‘åŸºå›¾æ•°æ®ç”Ÿæˆæµç¨‹

```mermaid
graph TD
    A[è·å–åˆ†é…æ•°æ®] --> B[åˆ›å»ºèŠ‚ç‚¹]
    B --> C[ç¬¬ä¸€æ—¶é—´ç‚¹: å›¢é˜Ÿâ†’é¡¹ç›®]
    C --> D[åç»­æ—¶é—´ç‚¹: é¡¹ç›®ç»§æ‰¿]
    D --> E[è·¨é¡¹ç›®äººå‘˜è½¬ç§»]
    E --> F[è¿æ¥çº¿åˆå¹¶]
    F --> G[ç”Ÿæˆæœ€ç»ˆæ•°æ®]
    G --> H[æ¸²æŸ“æ¡‘åŸºå›¾]
```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. ç»„ä»¶ä¼˜åŒ–

**Reactä¼˜åŒ–**:
```typescript
// ä½¿ç”¨React.memoé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
const AllocationGrid = React.memo(({ teams, projects, timePoints }) => {
  // ç»„ä»¶å®ç°
});

// ä½¿ç”¨useMemoç¼“å­˜è®¡ç®—ç»“æœ
const sankeyData = useMemo(() => {
  return generateSankeyData(teams, projects, timePoints, allocations);
}, [teams, projects, timePoints, allocations]);

// ä½¿ç”¨useCallbackç¼“å­˜å›è°ƒå‡½æ•°
const handleAllocationChange = useCallback((timePointId, projectId, teamId, value) => {
  updateAllocation(timePointId, projectId, teamId, { occupied: value });
}, [updateAllocation]);
```

### 2. æ•°æ®ä¼˜åŒ–

**çŠ¶æ€ç®¡ç†ä¼˜åŒ–**:
```typescript
// ä½¿ç”¨immerè¿›è¡Œä¸å¯å˜æ›´æ–°
import { produce } from 'immer';

const updateAllocation = (timePointId, projectId, teamId, allocation) => {
  set(produce((state) => {
    state.allocations[timePointId][projectId][teamId] = allocation;
  }));
};
```

**æœ¬åœ°å­˜å‚¨ä¼˜åŒ–**:
```typescript
// é˜²æŠ–ä¿å­˜ï¼Œé¿å…é¢‘ç¹å†™å…¥
const debouncedSave = debounce((data) => {
  localStorage.setItem('allocation-data', JSON.stringify(data));
}, 500);
```

### 3. æ¸²æŸ“ä¼˜åŒ–

**å›¾è¡¨ä¼˜åŒ–**:
```typescript
// EChartså›¾è¡¨æ‡’åŠ è½½å’ŒæŒ‰éœ€æ›´æ–°
const chart = useRef(null);

useEffect(() => {
  if (chart.current && data) {
    chart.current.setOption(option, { notMerge: false, lazyUpdate: true });
  }
}, [data, option]);
```

## ğŸ”’ æ•°æ®å®‰å…¨è®¾è®¡

### 1. ç±»å‹å®‰å…¨

**TypeScriptä¸¥æ ¼æ¨¡å¼**:
```typescript
// tsconfig.json
{
  "compilerOptions": {
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "strictFunctionTypes": true
  }
}
```

### 2. æ•°æ®éªŒè¯

**è¿è¡Œæ—¶éªŒè¯**:
```typescript
const validateAllocation = (allocation: Allocation): ValidationResult => {
  const errors: string[] = [];
  
  if (allocation.occupied < 0) {
    errors.push('äººåŠ›åˆ†é…ä¸èƒ½ä¸ºè´Ÿæ•°');
  }
  
  if (allocation.occupied > 100) {
    errors.push('å•ä¸ªåˆ†é…ä¸èƒ½è¶…è¿‡100äºº');
  }
  
  return { isValid: errors.length === 0, errors };
};
```

### 3. é”™è¯¯å¤„ç†

**è¾¹ç•Œé”™è¯¯å¤„ç†**:
```typescript
class ErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false };
  }
  
  static getDerivedStateFromError(error) {
    return { hasError: true };
  }
  
  componentDidCatch(error, errorInfo) {
    console.error('åº”ç”¨é”™è¯¯:', error, errorInfo);
  }
  
  render() {
    if (this.state.hasError) {
      return <ErrorFallback />;
    }
    
    return this.props.children;
  }
}
```

## ğŸ“± å“åº”å¼è®¾è®¡

### æ–­ç‚¹ç³»ç»Ÿ

```css
/* Tailwind CSSæ–­ç‚¹ */
sm: 640px   /* å°å±å¹• */
md: 768px   /* ä¸­ç­‰å±å¹• */
lg: 1024px  /* å¤§å±å¹• */
xl: 1280px  /* è¶…å¤§å±å¹• */
2xl: 1536px /* è¶…è¶…å¤§å±å¹• */
```

### é€‚é…ç­–ç•¥

**è¡¨æ ¼é€‚é…**:
```typescript
// å°å±å¹•ä¸‹ç®€åŒ–æ˜¾ç¤º
const isMobile = useMediaQuery('(max-width: 768px)');

return (
  <div className={`
    ${isMobile ? 'overflow-x-auto' : 'overflow-auto'}
    ${isMobile ? 'text-xs' : 'text-sm'}
  `}>
    {/* è¡¨æ ¼å†…å®¹ */}
  </div>
);
```

**å›¾è¡¨é€‚é…**:
```typescript
// å›¾è¡¨å“åº”å¼é…ç½®
const chartOption = {
  grid: {
    left: isMobile ? '5%' : '10%',
    right: isMobile ? '5%' : '10%',
    top: isMobile ? '15%' : '12%',
    bottom: isMobile ? '15%' : '8%'
  }
};
```

## ğŸ”„ éƒ¨ç½²æ¶æ„

### æ„å»ºæµç¨‹

```mermaid
graph LR
    A[æºä»£ç ] --> B[TypeScriptç¼–è¯‘]
    B --> C[Viteæ„å»º]
    C --> D[ä»£ç åˆ†å‰²]
    D --> E[èµ„æºä¼˜åŒ–]
    E --> F[ç”Ÿäº§åŒ…]
    F --> G[éƒ¨ç½²]
```

### éƒ¨ç½²é…ç½®

```typescript
// vite.config.ts
export default defineConfig({
  build: {
    target: 'es2015',
    outDir: 'dist',
    assetsDir: 'assets',
    sourcemap: false,
    minify: 'terser',
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['react', 'react-dom'],
          charts: ['echarts'],
          utils: ['lodash']
        }
      }
    }
  }
});
```

## ğŸ“ˆ ç›‘æ§ä¸åˆ†æ

### æ€§èƒ½ç›‘æ§

```typescript
// æ€§èƒ½æŒ‡æ ‡æ”¶é›†
const performanceObserver = new PerformanceObserver((list) => {
  for (const entry of list.getEntries()) {
    if (entry.entryType === 'measure') {
      console.log(`${entry.name}: ${entry.duration}ms`);
    }
  }
});

performanceObserver.observe({ entryTypes: ['measure'] });
```

### ç”¨æˆ·è¡Œä¸ºåˆ†æ

```typescript
// ç”¨æˆ·æ“ä½œè¿½è¸ª
const trackUserAction = (action: string, data?: any) => {
  // å‘é€åˆ°åˆ†ææœåŠ¡
  analytics.track(action, {
    timestamp: new Date().toISOString(),
    data
  });
};
```

## ğŸ”® æ‰©å±•æ€§è®¾è®¡

### æ’ä»¶åŒ–æ¶æ„

```typescript
// æ’ä»¶æ¥å£å®šä¹‰
interface Plugin {
  name: string;
  version: string;
  install: (app: Application) => void;
  uninstall?: (app: Application) => void;
}

// æ’ä»¶ç®¡ç†å™¨
class PluginManager {
  private plugins: Map<string, Plugin> = new Map();
  
  register(plugin: Plugin) {
    this.plugins.set(plugin.name, plugin);
    plugin.install(this.app);
  }
  
  unregister(name: string) {
    const plugin = this.plugins.get(name);
    if (plugin?.uninstall) {
      plugin.uninstall(this.app);
    }
    this.plugins.delete(name);
  }
}
```

### ä¸»é¢˜ç³»ç»Ÿ

```typescript
// ä¸»é¢˜é…ç½®
interface Theme {
  colors: {
    primary: string;
    secondary: string;
    background: string;
    text: string;
  };
  spacing: {
    xs: string;
    sm: string;
    md: string;
    lg: string;
    xl: string;
  };
  typography: {
    fontFamily: string;
    fontSize: {
      xs: string;
      sm: string;
      base: string;
      lg: string;
      xl: string;
    };
  };
}
```

## ğŸ“š æ€»ç»“

Omada ç ”å‘äººåŠ›æ’å¸ƒå¯è§†åŒ–å·¥å…·é‡‡ç”¨ç°ä»£åŒ–çš„å‰ç«¯æ¶æ„è®¾è®¡ï¼Œå…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š

### ğŸ† æ¶æ„ä¼˜åŠ¿

1. **æ¨¡å—åŒ–è®¾è®¡**: æ¸…æ™°çš„æ¨¡å—åˆ†ç¦»ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
2. **ç±»å‹å®‰å…¨**: å®Œæ•´çš„TypeScriptç±»å‹ç³»ç»Ÿï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯
3. **æ€§èƒ½ä¼˜åŒ–**: å¤šå±‚æ¬¡çš„æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼Œç¡®ä¿æµç•…ä½“éªŒ
4. **å“åº”å¼è®¾è®¡**: é€‚é…å¤šç§è®¾å¤‡å’Œå±å¹•å°ºå¯¸
5. **å¯æ‰©å±•æ€§**: æ’ä»¶åŒ–æ¶æ„ï¼Œæ”¯æŒåŠŸèƒ½æ‰©å±•

### ğŸ¯ æŠ€æœ¯äº®ç‚¹

1. **æ™ºèƒ½ç®—æ³•**: å¤æ‚çš„äººåŠ›æµåŠ¨ç®—æ³•ï¼Œæ”¯æŒé¡¹ç›®ç»§æ‰¿å’Œå›¢é˜ŸåŒ¹é…
2. **æ•°æ®å¯è§†åŒ–**: ä¸“ä¸šçš„EChartså›¾è¡¨ï¼Œæ”¯æŒäº¤äº’å’Œè”åŠ¨
3. **çŠ¶æ€ç®¡ç†**: è½»é‡çº§ZustandçŠ¶æ€ç®¡ç†ï¼Œæ”¯æŒæŒä¹…åŒ–
4. **ç»„ä»¶ç³»ç»Ÿ**: å®Œæ•´çš„UIç»„ä»¶åº“ï¼Œç»Ÿä¸€çš„è®¾è®¡è§„èŒƒ
5. **å·¥ç¨‹åŒ–**: ç°ä»£åŒ–çš„å¼€å‘å·¥å…·é“¾ï¼Œæ”¯æŒç±»å‹æ£€æŸ¥å’Œä»£ç è§„èŒƒ

### ğŸš€ æœªæ¥å‘å±•

1. **å¾®å‰ç«¯**: æ”¯æŒå¾®å‰ç«¯æ¶æ„ï¼Œç‹¬ç«‹éƒ¨ç½²å’Œå‡çº§
2. **å®æ—¶åä½œ**: æ”¯æŒå¤šç”¨æˆ·å®æ—¶åä½œç¼–è¾‘
3. **AIè¾…åŠ©**: é›†æˆAIç®—æ³•ï¼Œæ™ºèƒ½æ¨èäººåŠ›åˆ†é…æ–¹æ¡ˆ
4. **ç§»åŠ¨ç«¯**: å¼€å‘ç§»åŠ¨ç«¯åº”ç”¨ï¼Œæ”¯æŒç§»åŠ¨åŠå…¬
5. **äº‘ç«¯åŒæ­¥**: æ”¯æŒäº‘ç«¯æ•°æ®åŒæ­¥å’Œå¤‡ä»½

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025å¹´7æœˆ  
**ç»´æŠ¤è€…**: Lucien Chen